{"ast":null,"code":"import _defineProperty from\"E:\\\\PlayerPlusPlus\\\\player-plus-plus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\PlayerPlusPlus\\\\player-plus-plus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\PlayerPlusPlus\\\\player-plus-plus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\PlayerPlusPlus\\\\player-plus-plus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\PlayerPlusPlus\\\\player-plus-plus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\PlayerPlusPlus\\\\player-plus-plus\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import axios from'axios';import\"./style-sheets/gamepage.css\";import NavBar from\"./navbar.component\";import{connect}from\"react-redux\";import LazyLoad from'react-lazy-load';import{Link}from'react-router-dom';var Post=function Post(props){return React.createElement(\"div\",null,React.createElement(LazyLoad,{onContentVisible:function onContentVisible(){return console.log('lazyloaded!');}},React.createElement(\"div\",{className:\"post\"},React.createElement(\"div\",{className:\"postHeader\"},React.createElement(\"div\",{className:\"headerCircle\"},React.createElement(\"div\",{style:{height:'50px',width:'50px',backgroundImage:\"url(\".concat(require(\"./style-sheets/pics/profilePic.png\"),\")\")}})),React.createElement(\"div\",{className:\"posterName\"},props.post.name,React.createElement(\"br\",null),React.createElement(\"div\",{className:\"postDate\"},props.post.date.split(\"T\")[0])),React.createElement(\"div\",{className:\"platformIcon\",style:{display:props.post.platform==\"noPlatform\"?\"none\":\"block\"}},React.createElement(\"div\",{style:{height:\"25px\",width:\"25px\",backgroundImage:props.post.platform==\"noPlatform\"?\"url()\":\"url(\".concat(require(\"./style-sheets/pics/PlatformPics/\".concat(props.post.platform,\".png\")),\")\")}}))),React.createElement(\"div\",{className:\"contentBox\"},React.createElement(\"div\",{className:\"contentText\"},props.post.message),React.createElement(\"div\",{className:\"replyInfo\"},React.createElement(\"p\",{style:{fontSize:\"14px\",color:\"#c9c4c2\",display:\"inline-block\",marginLeft:\"10px\"}},\"35 Replies\")),React.createElement(\"hr\",{className:\"replyOptionsDivider\"}),React.createElement(\"div\",{className:\"replyOptions\"},React.createElement(Link,{to:{pathname:\"/game/viewpost\",id:props.post._id}},React.createElement(\"p\",{className:\"viewReplies\"},\"View Replies\")))))));};var GamePage=/*#__PURE__*/function(_Component){_inherits(GamePage,_Component);function GamePage(props){var _this;_classCallCheck(this,GamePage);_this=_possibleConstructorReturn(this,_getPrototypeOf(GamePage).call(this,props));_this.onSubmitPost=function(e){e.preventDefault();var newPost={name:_this.props.auth.user.name,message:_this.state.postContent,game:_this.state.game._id,platform:_this.state.platform};axios.post('/posts/post',newPost).then(function(res){console.log(res);_this.getPosts();});_this.setState({postContent:\"\"});};_this.onChange=function(e){_this.setState(_defineProperty({},e.target.id,e.target.value));};_this.state=_this.getInitialState();return _this;}_createClass(GamePage,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;window.scrollTo(0,0);axios.get('/games/'+this.props.location.id).then(function(res){_this2.setSavedGame(res.data);_this2.getPosts(_this2.state.game._id);}).catch(function(error){console.log(error);});}},{key:\"getPosts\",value:function getPosts(){var _this3=this;axios.get('/posts/'+this.state.game._id).then(function(res){_this3.setSavedPosts(res.data.reverse());console.log(res);}).catch(function(error){console.log(error);});}},{key:\"getInitialState\",value:function getInitialState(){var game=JSON.parse(localStorage.getItem('Game'))||[];var posts=JSON.parse(localStorage.getItem('Posts'))||[];var postContent=\"\";var platform=\"noPlatform\";var id=localStorage.getItem('Id')||this.props.location.id;var focusPost=[];return{game:game,posts:posts,postContent:postContent,platform:platform,id:id,focusPost:focusPost};}},{key:\"setSavedGame\",value:function setSavedGame(game){localStorage.setItem('Game',JSON.stringify(game));this.setState({game:game});}},{key:\"setSavedPosts\",value:function setSavedPosts(posts){localStorage.setItem('Posts',JSON.stringify(posts));this.setState({posts:posts});}},{key:\"setFocusPost\",value:function setFocusPost(post){}},{key:\"createPosts\",value:function createPosts(){return this.state.posts.map(function(currentPost){return React.createElement(Post,{post:currentPost,key:currentPost._id});});}},{key:\"render\",value:function render(){return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"background\"},React.createElement(NavBar,null),React.createElement(\"div\",{className:\"page\"},React.createElement(\"div\",{className:\"pageGrid\"},React.createElement(\"div\",{className:\"leftColumn\"},React.createElement(\"div\",{style:{height:'100px',width:'475px',backgroundImage:\"url(\".concat(require(\"./style-sheets/pics/GamePageHeadPics/\".concat(this.state.game.gameHeadPicUrl)),\")\"),borderRadius:'15px',position:\"fixed\"}},React.createElement(\"div\",{className:\"gameTitle\"},this.state.game.name)),React.createElement(\"div\",null,React.createElement(\"button\",{type:\"button\",className:\"btn btn-lg followButton\"},\"Follow This Game\")),React.createElement(\"div\",{className:\"popularPosts\"},React.createElement(\"p\",{style:{color:'white',marginLeft:'10px'}},\"Popular Posts\")),React.createElement(\"div\",{className:\"popularPosters\"},React.createElement(\"p\",{style:{color:'white',marginLeft:'10px'}},\"Popular Posters\"))),React.createElement(\"div\",{className:\"middleColumn\"},React.createElement(\"div\",{style:{display:this.props.auth.isAuthenticated?'block':'none'}},React.createElement(\"div\",{className:\"createPost\"},React.createElement(\"div\",{className:\"postHeader\"},React.createElement(\"div\",{className:\"headerCircle\"},React.createElement(\"div\",{style:{height:'50px',width:'50px',backgroundImage:\"url(\".concat(require(\"./style-sheets/pics/profilePic.png\"),\")\")}})),React.createElement(\"div\",{className:\"createPostName\"},this.props.auth.user.name)),React.createElement(\"div\",{className:\"contentBox\"},React.createElement(\"form\",{noValidate:true,onSubmit:this.onSubmitPost},React.createElement(\"div\",{className:\"postBar\"},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{onChange:this.onChange,value:this.state.postContent,id:\"postContent\",style:{color:\"black\"},placeholder:\"Create a Post Here\",className:\"form-control\"}))),React.createElement(\"div\",{style:{paddingBottom:\"10px\"}},React.createElement(\"div\",{style:{paddingLeft:\"10px\",marginTop:\"-5px\",display:\"inline\"}},React.createElement(\"button\",{className:\"btn submitPostButton\",type:\"submit\"},\"Submit Post\")),React.createElement(\"div\",{style:{display:\"inline\",marginLeft:\"120px\"}},React.createElement(\"label\",{for:\"platform\",style:{color:\"white\"}},\"Choose a platform: \"),React.createElement(\"select\",{id:\"platform\",value:this.state.platform,onChange:this.onChange},React.createElement(\"option\",{value:\"noPlatform\"},\"No platform\"),React.createElement(\"option\",{value:\"xbox\"},\"Xbox\"),React.createElement(\"option\",{value:\"playstation\"},\"Playstation\"),React.createElement(\"option\",{value:\"pc\"},\"PC\"),React.createElement(\"option\",{value:\"steam\"},\"Steam\")))))))),React.createElement(\"div\",{className:\"feed\"},this.createPosts(),React.createElement(\"p\",{style:{color:\"#615f5e\",marginLeft:\"200px\",marginTop:\"10px\"}},\"End of feed\"))),React.createElement(\"div\",{className:\"rightColumn\"})))));}}]);return GamePage;}(Component);var mapStateToProps=function mapStateToProps(state){return{auth:state.auth};};export default connect(mapStateToProps)(GamePage);","map":{"version":3,"sources":["E:/PlayerPlusPlus/player-plus-plus/src/components/game-page.component.js"],"names":["React","Component","axios","NavBar","connect","LazyLoad","Link","Post","props","console","log","height","width","backgroundImage","require","post","name","date","split","display","platform","message","fontSize","color","marginLeft","pathname","id","_id","GamePage","onSubmitPost","e","preventDefault","newPost","auth","user","state","postContent","game","then","res","getPosts","setState","onChange","target","value","getInitialState","window","scrollTo","get","location","setSavedGame","data","catch","error","setSavedPosts","reverse","JSON","parse","localStorage","getItem","posts","focusPost","setItem","stringify","map","currentPost","gameHeadPicUrl","borderRadius","position","isAuthenticated","paddingBottom","paddingLeft","marginTop","createPosts","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport \"./style-sheets/gamepage.css\";\r\nimport NavBar from \"./navbar.component\";\r\nimport PropTypes from \"prop-types\";\r\nimport { connect } from \"react-redux\";\r\nimport LazyLoad from 'react-lazy-load';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Post = props => (\r\n    <div>\r\n      <LazyLoad onContentVisible={() => console.log('lazyloaded!')}>\r\n        <div className=\"post\">\r\n          <div className=\"postHeader\">\r\n            <div className=\"headerCircle\">\r\n              <div style={{height: '50px', width: '50px', backgroundImage: `url(${require(`./style-sheets/pics/profilePic.png`)})`}}></div>\r\n            </div>\r\n            <div className=\"posterName\">\r\n              {props.post.name}\r\n              <br></br>\r\n              <div className=\"postDate\">{props.post.date.split(\"T\")[0]}</div>\r\n            </div>\r\n            <div className=\"platformIcon\" style={{display: props.post.platform == \"noPlatform\" ? \"none\" : \"block\"}}>\r\n              <div style={{height: \"25px\", width: \"25px\", backgroundImage: props.post.platform == \"noPlatform\" ? \"url()\" : `url(${require(`./style-sheets/pics/PlatformPics/${props.post.platform}.png`)})`}}></div>\r\n            </div>\r\n          </div>\r\n          <div className=\"contentBox\">\r\n            <div className=\"contentText\">{props.post.message}</div>\r\n            <div className=\"replyInfo\">\r\n              <p style={{fontSize: \"14px\", color: \"#c9c4c2\", display: \"inline-block\", marginLeft: \"10px\"}}>35 Replies</p>\r\n            </div>\r\n            <hr className=\"replyOptionsDivider\"></hr>\r\n            <div className=\"replyOptions\">\r\n              <Link to={{pathname: \"/game/viewpost\", id: props.post._id}}><p className=\"viewReplies\">View Replies</p></Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </LazyLoad>\r\n    </div>\r\n)\r\n\r\nclass GamePage extends Component{\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = this.getInitialState();\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.scrollTo(0,0);\r\n    axios.get('/games/' + this.props.location.id)\r\n      .then(res => {\r\n        this.setSavedGame(res.data);\r\n        this.getPosts(this.state.game._id);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  }\r\n\r\n  onSubmitPost = e => {\r\n    e.preventDefault();\r\n\r\n    const newPost = {\r\n      name: this.props.auth.user.name,\r\n      message: this.state.postContent,\r\n      game: this.state.game._id,\r\n      platform: this.state.platform\r\n    };\r\n\r\n    axios.post('/posts/post', newPost)\r\n      .then(res => {\r\n        console.log(res);\r\n        this.getPosts();\r\n      })\r\n\r\n    this.setState({postContent: \"\"});\r\n  };\r\n\r\n  onChange = e => {\r\n    this.setState({ [e.target.id]: e.target.value });\r\n  };\r\n\r\n  getPosts(){\r\n    axios.get('/posts/' + this.state.game._id)\r\n      .then(res => {\r\n        this.setSavedPosts(res.data.reverse());\r\n        console.log(res);\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      })\r\n  }\r\n\r\n  getInitialState() {\r\n    var game = JSON.parse(localStorage.getItem('Game')) || [];\r\n    var posts = JSON.parse(localStorage.getItem('Posts')) || [];\r\n    var postContent = \"\";\r\n    var platform = \"noPlatform\";\r\n    var id = localStorage.getItem('Id') || this.props.location.id;\r\n    var focusPost = [];\r\n\r\n    return {\r\n      game: game,\r\n      posts: posts,\r\n      postContent: postContent,\r\n      platform: platform,\r\n      id: id,\r\n      focusPost: focusPost\r\n    };\r\n  }\r\n\r\n  setSavedGame(game) {\r\n    localStorage.setItem('Game', JSON.stringify(game));\r\n    this.setState({game: game});\r\n  }\r\n\r\n  setSavedPosts(posts) {\r\n    localStorage.setItem('Posts', JSON.stringify(posts));\r\n    this.setState({posts: posts});\r\n  }\r\n\r\n  setFocusPost(post){\r\n\r\n  }\r\n\r\n  createPosts(){\r\n    return this.state.posts.map(currentPost =>{\r\n      return <Post post={currentPost} key={currentPost._id} />\r\n    })\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div>\r\n        {/*----------------------------------------REPLY MODAL--------------------------------------------------------- */}\r\n        {/*----------------------------------------REPLY MODAL END--------------------------------------------------------- */}\r\n        <div className=\"background\">\r\n          <NavBar />\r\n          <div className=\"page\">\r\n            <div className=\"pageGrid\">\r\n              {/*----------------------------------------LEFT COLUMN--------------------------------------------------------- */}\r\n              <div className=\"leftColumn\">\r\n                <div style={{height: '100px', width: '475px', backgroundImage: `url(${require(`./style-sheets/pics/GamePageHeadPics/${this.state.game.gameHeadPicUrl}`)})`, borderRadius: '15px', position: \"fixed\"}}>\r\n                  <div className=\"gameTitle\">{this.state.game.name}</div>\r\n                </div>\r\n                <div>\r\n                  <button type=\"button\" className=\"btn btn-lg followButton\">Follow This Game</button>\r\n                </div>\r\n                <div className=\"popularPosts\">\r\n                  <p style={{color: 'white', marginLeft: '10px'}}>Popular Posts</p>\r\n                </div>\r\n                <div className=\"popularPosters\">\r\n                  <p style={{color: 'white', marginLeft: '10px'}}>Popular Posters</p>\r\n                </div>\r\n              </div>\r\n              {/*----------------------------------------LEFT COLUMN END--------------------------------------------------------- */}\r\n              {/*----------------------------------------MIDDLE COLUMN--------------------------------------------------------- */}\r\n              <div className=\"middleColumn\">\r\n                {/*----------------------------------------CREATE POST--------------------------------------------------------- */}\r\n                  <div style={{display: this.props.auth.isAuthenticated ? 'block' : 'none'}}>\r\n                    <div className=\"createPost\">\r\n                      <div className=\"postHeader\">\r\n                        <div className=\"headerCircle\">\r\n                          <div style={{height: '50px', width: '50px', backgroundImage: `url(${require(`./style-sheets/pics/profilePic.png`)})`}}></div>\r\n                        </div>\r\n                        <div className=\"createPostName\">\r\n                          {this.props.auth.user.name}\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"contentBox\">\r\n                        <form noValidate onSubmit={this.onSubmitPost}>\r\n                          <div className=\"postBar\">\r\n                            <div className=\"form-group\">\r\n                              <input\r\n                                onChange={this.onChange}\r\n                                value={this.state.postContent}\r\n                                id=\"postContent\"\r\n                                style={{color: \"black\"}}\r\n                                placeholder=\"Create a Post Here\"\r\n                                className=\"form-control\"\r\n                              />\r\n                            </div>\r\n                          </div>\r\n                          <div style={{paddingBottom: \"10px\"}}>\r\n                            <div style={{ paddingLeft: \"10px\", marginTop: \"-5px\", display: \"inline\"}}>\r\n                              <button className=\"btn submitPostButton\" type=\"submit\">Submit Post</button>\r\n                            </div>\r\n                            <div style={{display: \"inline\", marginLeft: \"120px\"}}>\r\n                              <label for=\"platform\" style={{color: \"white\"}}>Choose a platform: </label>\r\n                              <select id=\"platform\" value={this.state.platform} onChange={this.onChange}>\r\n                                <option value=\"noPlatform\">No platform</option>\r\n                                <option value=\"xbox\">Xbox</option>\r\n                                <option value=\"playstation\">Playstation</option>\r\n                                <option value=\"pc\">PC</option>\r\n                                <option value=\"steam\">Steam</option>\r\n                              </select> \r\n                            </div>\r\n                          </div>\r\n                        </form>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  {/*----------------------------------------CREATE POST END--------------------------------------------------------- */}\r\n                  {/*----------------------------------------FEED--------------------------------------------------------- */}\r\n                <div className=\"feed\">\r\n                  {this.createPosts()}\r\n                  <p style={{color: \"#615f5e\", marginLeft: \"200px\", marginTop: \"10px\"}}>End of feed</p>\r\n                </div>\r\n                {/*----------------------------------------FEED--------------------------------------------------------- */}\r\n              </div>\r\n              {/*----------------------------------------MIDDLE COLUMN END--------------------------------------------------------- */}\r\n              <div className=\"rightColumn\"></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nGamePage.propTypes = {\r\n  auth: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  auth: state.auth\r\n});\r\n\r\nexport default connect(\r\n  mapStateToProps\r\n)(GamePage);"]},"metadata":{},"sourceType":"module"}