{"ast":null,"code":"import React from'react';import\"bootstrap/dist/css/bootstrap.min.css\";import{BrowserRouter as Router,Route,Switch}from\"react-router-dom\";import jwt_decode from\"jwt-decode\";import setAuthToken from\"./utils/setAuthToken\";import{setCurrentUser,logoutUser}from\"./actions/authActions\";import{Provider}from\"react-redux\";import store from\"./store\";import HomePage from'./components/home-page.component';//import AllGames from './components/all-games';\nimport GamePage from'./components/game-page.component';import Register from'./components/register.component';import Login from'./components/login.component';import PrivateRoute from\"./components/private-route/PrivateRoute\";import Dashboard from\"./components/dashboard/dashboard.component\";// Check for token to keep user logged in\nif(localStorage.jwtToken){// Set auth token header auth\nvar token=localStorage.jwtToken;setAuthToken(token);// Decode token and get user info and exp\nvar decoded=jwt_decode(token);// Set user and isAuthenticated\nstore.dispatch(setCurrentUser(decoded));// Check for expired token\nvar currentTime=Date.now()/1000;// to get in milliseconds\nif(decoded.exp<currentTime){// Logout user\nstore.dispatch(logoutUser());// Redirect to login\nwindow.location.href=\"./login\";}}function App(){return React.createElement(Provider,{store:store},React.createElement(Router,null,React.createElement(\"div\",{className:\"App\"},React.createElement(Route,{exact:true,path:\"/\",component:HomePage}),React.createElement(Route,{exact:true,path:\"/game\",component:GamePage}),React.createElement(Route,{exact:true,path:\"/register\",component:Register}),React.createElement(Route,{exact:true,path:\"/login\",component:Login}),React.createElement(Switch,null,React.createElement(PrivateRoute,{exact:true,path:\"/dashboard\",component:Dashboard})))));}export default App;","map":{"version":3,"sources":["E:/PlayerPlusPlus/player-plus-plus/src/App.js"],"names":["React","BrowserRouter","Router","Route","Switch","jwt_decode","setAuthToken","setCurrentUser","logoutUser","Provider","store","HomePage","GamePage","Register","Login","PrivateRoute","Dashboard","localStorage","jwtToken","token","decoded","dispatch","currentTime","Date","now","exp","window","location","href","App"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,sCAAP,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,KAAlC,CAAyCC,MAAzC,KAAsD,kBAAtD,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,sBAAzB,CACA,OAASC,cAAT,CAAyBC,UAAzB,KAA2C,uBAA3C,CACA,OAASC,QAAT,KAAyB,aAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,SAAlB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA;AACA,MAAOC,CAAAA,QAAP,KAAqB,kCAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iCAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,8BAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,yCAAzB,CACA,MAAOC,CAAAA,SAAP,KAAsB,4CAAtB,CAEA;AACA,GAAIC,YAAY,CAACC,QAAjB,CAA2B,CAEzB;AACA,GAAMC,CAAAA,KAAK,CAAGF,YAAY,CAACC,QAA3B,CACAZ,YAAY,CAACa,KAAD,CAAZ,CAEA;AACA,GAAMC,CAAAA,OAAO,CAAGf,UAAU,CAACc,KAAD,CAA1B,CAEA;AACAT,KAAK,CAACW,QAAN,CAAed,cAAc,CAACa,OAAD,CAA7B,EAEA;AACA,GAAME,CAAAA,WAAW,CAAGC,IAAI,CAACC,GAAL,GAAa,IAAjC,CAEA;AACA,GAAIJ,OAAO,CAACK,GAAR,CAAcH,WAAlB,CAA+B,CAC7B;AACAZ,KAAK,CAACW,QAAN,CAAeb,UAAU,EAAzB,EAAiC;AACjCkB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,SAAvB,CACD,CACF,CAED,QAASC,CAAAA,GAAT,EAAc,CACZ,MACE,qBAAC,QAAD,EAAU,KAAK,CAAEnB,KAAjB,EACE,oBAAC,MAAD,MACE,2BAAK,SAAS,CAAC,KAAf,EACE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,GAAlB,CAAsB,SAAS,CAAEC,QAAjC,EADF,CAIE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,OAAlB,CAA0B,SAAS,CAAEC,QAArC,EAJF,CAKE,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,WAAlB,CAA8B,SAAS,CAAEC,QAAzC,EALF,CAME,oBAAC,KAAD,EAAO,KAAK,KAAZ,CAAa,IAAI,CAAC,QAAlB,CAA2B,SAAS,CAAEC,KAAtC,EANF,CAOE,oBAAC,MAAD,MACI,oBAAC,YAAD,EAAc,KAAK,KAAnB,CAAoB,IAAI,CAAC,YAAzB,CAAsC,SAAS,CAAEE,SAAjD,EADJ,CAPF,CADF,CADF,CADF,CAiBD,CAED,cAAea,CAAAA,GAAf","sourcesContent":["import React from 'react';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { BrowserRouter as Router, Route, Switch} from \"react-router-dom\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport setAuthToken from \"./utils/setAuthToken\";\r\nimport { setCurrentUser, logoutUser } from \"./actions/authActions\";\r\nimport { Provider } from \"react-redux\";\r\nimport store from \"./store\";\r\n\r\nimport HomePage from './components/home-page.component';\r\n//import AllGames from './components/all-games';\r\nimport GamePage from './components/game-page.component';\r\nimport Register from './components/register.component';\r\nimport Login from './components/login.component';\r\nimport PrivateRoute from \"./components/private-route/PrivateRoute\";\r\nimport Dashboard from \"./components/dashboard/dashboard.component\";\r\n\r\n// Check for token to keep user logged in\r\nif (localStorage.jwtToken) {\r\n\r\n  // Set auth token header auth\r\n  const token = localStorage.jwtToken;\r\n  setAuthToken(token);\r\n\r\n  // Decode token and get user info and exp\r\n  const decoded = jwt_decode(token);\r\n\r\n  // Set user and isAuthenticated\r\n  store.dispatch(setCurrentUser(decoded));\r\n  \r\n  // Check for expired token\r\n  const currentTime = Date.now() / 1000; \r\n  \r\n  // to get in milliseconds\r\n  if (decoded.exp < currentTime) {\r\n    // Logout user\r\n    store.dispatch(logoutUser());    // Redirect to login\r\n    window.location.href = \"./login\";\r\n  }\r\n}\r\n\r\nfunction App(){\r\n  return (\r\n    <Provider store={store}>\r\n      <Router>\r\n        <div className=\"App\">\r\n          <Route exact path=\"/\" component={HomePage} />\r\n          {/* <Route path=\"/homepage\" component={HomePage} /> */}\r\n          {/* <Route path=\"/allgames\" component={AllGames} /> */}\r\n          <Route exact path=\"/game\" component={GamePage} />\r\n          <Route exact path=\"/register\" component={Register} />\r\n          <Route exact path=\"/login\" component={Login} />\r\n          <Switch>\r\n              <PrivateRoute exact path=\"/dashboard\" component={Dashboard} />\r\n            </Switch>\r\n        </div>\r\n      </Router>\r\n    </Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}